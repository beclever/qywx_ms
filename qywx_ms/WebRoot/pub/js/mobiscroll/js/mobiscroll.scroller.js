(function(t,q,p,w){var v,z=t.mobiscroll,u=z.classes,s=z.util,A=s.jsPrefix,r=s.has3d,B=s.hasFlex,y=s.getCoord,o=s.constrain,x=s.testTouch;z.presetShort("scroller","Scroller",false);u.Scroller=function(av,aq,aC){var ax,c,aH,ap,aP,aF,aG,h,aN,aW,k,aT,aw,aB,m,n,aY,f,b,i,aK=this,aL=t(av),j={},g={},aO={},aI=[];function aE(C){if(x(C,this)&&!v&&!aN&&!c&&!az(this)){C.preventDefault();C.stopPropagation();v=true;aH=aF.mode!="clickpick";aY=t(".dw-ul",this);aV(aY);aW=j[f]!==w;aB=aW?ao(aY):g[f];k=y(C,"Y");aT=new Date();aw=k;aD(aY,f,aB,0.001);if(aH){aY.closest(".dwwl").addClass("dwa")}if(C.type==="mousedown"){t(p).on("mousemove",ay).on("mouseup",aA)}}}function ay(C){if(v){if(aH){C.preventDefault();C.stopPropagation();aw=y(C,"Y");if(Math.abs(aw-k)>3||aW){aD(aY,f,o(aB+(k-aw)/ap,m-1,n+1));aW=true}}}}function aA(F){if(v){var J=new Date()-aT,M=o(Math.round(aB+(k-aw)/ap),m-1,n+1),K=M,I,G,H=aY.offset().top;F.stopPropagation();v=false;if(F.type==="mouseup"){t(p).off("mousemove",ay).off("mouseup",aA)}if(r&&J<300){I=(aw-k)/J;G=(I*I)/aF.speedUnit;if(aw-k<0){G=-G}}else{G=aw-k}if(!aW){var D=Math.floor((aw-H)/ap),C=t(t(".dw-li",aY)[D]),E=C.hasClass("dw-v"),L=aH;J=0.1;if(h("onValueTap",[C])!==false&&E){K=D}else{L=true}if(L&&E){C.addClass("dw-hl");setTimeout(function(){C.removeClass("dw-hl")},100)}if(!aP&&(aF.confirmOnTap===true||aF.confirmOnTap[f])&&C.hasClass("dw-sel")){aK.select();return}}else{K=o(Math.round(aB-G/ap),m,n);J=I?Math.max(0.1,Math.abs((K-M)/I)*aF.timeUnit):0.1}if(aH){aS(aY,f,K,0,J,true)}}}function ar(C){c=t(this);if(x(C,this)){d(C,c.closest(".dwwl"),c.hasClass("dwwbp")?aU:aQ)}if(C.type==="mousedown"){t(p).on("mouseup",l)}}function l(C){c=null;if(aN){clearInterval(i);aN=false}if(C.type==="mouseup"){t(p).off("mouseup",l)}}function aM(C){if(C.keyCode==38){d(C,t(this),aQ)}else{if(C.keyCode==40){d(C,t(this),aU)}}}function aX(){if(aN){clearInterval(i);aN=false}}function aJ(D){if(!az(this)){D.preventDefault();D=D.originalEvent||D;var C=D.deltaY||D.wheelDelta||D.detail,E=t(".dw-ul",this);aV(E);aD(E,f,o(((C<0?-20:20)-aO[f])/ap,m-1,n+1));clearTimeout(aG);aG=setTimeout(function(){aS(E,f,Math.round(g[f]),C>0?1:2,0.1)},200)}}function d(C,F,D){C.stopPropagation();C.preventDefault();if(!aN&&!az(F)&&!F.hasClass("dwa")){aN=true;var E=F.find(".dw-ul");aV(E);clearInterval(i);i=setInterval(function(){D(E)},aF.delay);D(E)}}function az(D){if(t.isArray(aF.readonly)){var C=t(".dwwl",ax).index(D);return aF.readonly[C]}return aF.readonly}function au(D){var E='<div class="dw-bf">',G=aI[D],H=1,I=G.labels||[],F=G.values||[],C=G.keys||F;t.each(F,function(J,K){if(H%20===0){E+='</div><div class="dw-bf">'}E+='<div role="option" aria-selected="false" class="dw-li dw-v" data-val="'+C[J]+'"'+(I[J]?' aria-label="'+I[J]+'"':"")+' style="height:'+ap+"px;line-height:"+ap+'px;"><div class="dw-i"'+(b>1?' style="line-height:'+Math.round(ap/b)+"px;font-size:"+Math.round(ap/b*0.8)+'px;"':"")+">"+K+"</div></div>";H++});E+="</div>";return E}function aV(C){aP=C.closest(".dwwl").hasClass("dwwms");m=t(".dw-li",C).index(t(aP?".dw-li":".dw-v",C).eq(0));n=Math.max(m,t(".dw-li",C).index(t(aP?".dw-li":".dw-v",C).eq(-1))-(aP?aF.rows-(aF.mode=="scroller"?1:3):0));f=t(".dw-ul",ax).index(C)}function aZ(D){var C=aF.headerText;return C?(typeof C==="function"?C.call(av,D):C.replace(/\{value\}/i,D)):""}function ao(C){return Math.round(-s.getPosition(C,true)/ap)}function aR(C,D){clearTimeout(j[D]);delete j[D];C.closest(".dwwl").removeClass("dwa")}function aD(F,H,I,C,D){var G=-I*ap,E=F[0].style;if(G==aO[H]&&j[H]){return}aO[H]=G;if(r){E[A+"Transition"]=s.prefix+"transform "+(C?C.toFixed(3):0)+"s ease-out";E[A+"Transform"]="translate3d(0,"+G+"px,0)"}else{E.top=G+"px"}if(j[H]){aR(F,H)}if(C&&D){F.closest(".dwwl").addClass("dwa");j[H]=setTimeout(function(){aR(F,H)},C*1000)}g[H]=I}function e(F,N,P,L,E){var I,O=t('.dw-li[data-val="'+F+'"]',N),M=t(".dw-li",N),C=M.index(O),K=M.length;if(L){aV(N)}else{if(!O.hasClass("dw-v")){var D=O,G=O,H=0,J=0;while(C-H>=0&&!D.hasClass("dw-v")){H++;D=M.eq(C-H)}while(C+J<K&&!G.hasClass("dw-v")){J++;G=M.eq(C+J)}if(((J<H&&J&&P!==2)||!H||(C-H<0)||P==1)&&G.hasClass("dw-v")){O=G;C=C+J}else{O=D;C=C-H}}}I=O.hasClass("dw-sel");if(E){if(!L){t(".dw-sel",N).removeAttr("aria-selected");O.attr("aria-selected","true")}t(".dw-sel",N).removeClass("dw-sel");O.addClass("dw-sel")}return{selected:I,v:L?o(C,m,n):C,val:O.hasClass("dw-v")?O.attr("data-val"):null}}function at(C,F,E,G,D){if(h("validate",[ax,F,C,G])!==false){t(".dw-ul",ax).each(function(K){var L=t(this),H=L.closest(".dwwl").hasClass("dwwms"),I=K==F||F===w,M=e(aK._tempWheelArray[K],L,G,H,true),J=M.selected;if(!J||I){aK._tempWheelArray[K]=M.val;aD(L,K,M.v,I?C:0.1,I?D:false)}});h("onValidated",[]);aK._tempValue=aF.formatValue(aK._tempWheelArray,aK);if(aK.live){aK._hasValue=E||aK._hasValue;a(E,E,0,true)}aK._header.html(aZ(aK._tempValue));if(E){h("onChange",[aK._tempValue])}}}function aS(F,H,C,G,D,E){C=o(C,m,n);aK._tempWheelArray[H]=t(".dw-li",F).eq(C).attr("data-val");aD(F,H,C,D,E);setTimeout(function(){at(D,H,true,G,E)},10)}function aU(D){var C=g[f]+1;aS(D,f,C>n?m:C,1,0.1)}function aQ(D){var C=g[f]-1;aS(D,f,C<m?n:C,2,0.1)}function a(D,C,E,F,G){if(aK._isVisible&&!F){at(E)}aK._tempValue=aF.formatValue(aK._tempWheelArray,aK);if(!G){aK._wheelArray=aK._tempWheelArray.slice(0);aK._value=aK._hasValue?aK._tempValue:null}if(D){h("onValueFill",[aK._hasValue?aK._tempValue:"",C]);if(aK._isInput){aL.val(aK._hasValue?aK._tempValue:"")}if(C){aK._preventChange=true;aL.change()}}}u.Frame.call(this,av,aq,true);aK.setVal=aK._setVal=function(D,E,C,G,F){aK._hasValue=D!==null&&D!==w;aK._tempWheelArray=t.isArray(D)?D.slice(0):aF.parseValue.call(av,D,aK)||[];a(E,C===w?E:C,F,false,G)};aK.getVal=aK._getVal=function(D){var C=aK._hasValue||D?aK[D?"_tempValue":"_value"]:null;return s.isNumeric(C)?+C:C};aK.setArrayVal=aK.setVal;aK.getArrayVal=function(C){return C?aK._tempWheelArray:aK._wheelArray};aK.setValue=function(D,E,F,G,C){aK.setVal(D,E,C,G,F)};aK.getValue=aK.getArrayVal;aK.changeWheel=function(G,C,E){if(ax){var F=0,D=G.length;t.each(aF.wheels,function(I,H){t.each(H,function(J,K){if(t.inArray(F,G)>-1){aI[F]=K;t(".dw-ul",ax).eq(F).html(au(F));D--;if(!D){aK.position();at(C,w,E);return false}}F++});if(!D){return false}})}};aK.getValidCell=e;aK.scroll=aD;aK._generateContent=function(){var C,D="",E=0;D+='<table style="width:100%" class="mbsc-w-p dwc'+(aF.mode!="scroller"?" dwpm":" dwsc")+(aF.showLabel?"":" dwhl")+'"><tr class="dwwc"'+(aF.maxWidth?"":' style="width:100%"')+">"+(B?"":'<table class="dw-tbl" cellpadding="0" cellspacing="0"><tr>');t.each(aF.wheels,function(F,G){t.each(G,function(I,H){aI[E]=H;C=H.label!==w?H.label:I;D+='<td class="dwfl" style="width:18%"><div class="dwwl dwwl'+E+(H.multiple?" dwwms":"")+'">'+(aF.mode!="scroller"?'<div class="dwb-e dwwb dwwbp '+(aF.btnPlusClass||"")+'" style="height:'+ap+"px;line-height:"+ap+'px;"><span>+</span></div><div class="dwb-e dwwb dwwbm '+(aF.btnMinusClass||"")+'" style="height:'+ap+"px;line-height:"+ap+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+C+'</div><div tabindex="0" aria-live="off" aria-label="'+C+'" role="listbox" class="dwww"><div class="dww" style="height:'+(aF.rows*ap)+'px;"><div class="dw-ul" style="margin-top:'+(H.multiple?(aF.mode=="scroller"?0:ap):aF.rows/2*ap-ap/2)+'px;">';D+=au(E)+'</div></div><div class="dwwo"></div></div><div class="dwwol"'+(aF.selectedLineHeight?' style="height:'+ap+"px;margin-top:-"+(ap/2+(aF.selectedLineBorder||0))+'px;"':"")+"></div></div></td>";E++})});D+=(B?"":"</tr></table>")+"</tr></table>";return D};aK._attachEvents=function(C){C.on("keydown",".dwwl",aM).on("keyup",".dwwl",aX).on("touchstart mousedown",".dwwl",aE).on("touchmove",".dwwl",ay).on("touchend",".dwwl",aA).on("touchstart mousedown",".dwwb",ar).on("touchend",".dwwb",l);if(aF.mousewheel){C.on("wheel mousewheel",".dwwl",aJ)}};aK._markupReady=function(C){ax=C;at()};aK._fillValue=function(){aK._hasValue=true;a(true,true,0,true)};aK._readValue=function(){var C=aL.val()||"";if(C!==""){aK._hasValue=true}aK._tempWheelArray=aK._hasValue&&aK._wheelArray?aK._wheelArray.slice(0):aF.parseValue.call(av,C,aK)||[];a()};aK._processSettings=function(){aF=aK.settings;h=aK.trigger;ap=aF.height;b=aF.multiline;aK._isLiquid=(aF.layout||(/top|bottom/.test(aF.display)&&aF.wheels.length==1?"liquid":""))==="liquid";if(aF.formatResult){aF.formatValue=aF.formatResult}if(b>1){aF.cssClass=(aF.cssClass||"")+" dw-ml"}if(aF.mode!="scroller"){aF.rows=Math.max(3,aF.rows)}};aK._selectedValues={};if(!aC){aK.init(aq)}};u.Scroller.prototype={_hasDef:true,_hasTheme:true,_hasLang:true,_hasPreset:true,_class:"scroller",_defaults:t.extend({},u.Frame.prototype._defaults,{minWidth:60,height:40,rows:3,multiline:1,delay:300,readonly:false,showLabel:true,confirmOnTap:true,wheels:[],mode:"scroller",preset:"",speedUnit:0.0012,timeUnit:0.08,formatValue:function(a){return a.join(" ")},parseValue:function(b,c){var a=[],g=[],f=0,d,e;if(b!==null&&b!==w){a=(b+"").split(" ")}t.each(c.settings.wheels,function(h,i){t.each(i,function(k,j){e=j.keys||j.values;d=e[0];t.each(e,function(m,l){if(a[f]==l){d=l;return false}});g.push(d);f++})});return g}})};z.themes.scroller=z.themes.frame})(jQuery,window,document);